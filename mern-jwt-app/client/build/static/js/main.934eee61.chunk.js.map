{"version":3,"sources":["utils/token.js","contexts/AuthContext.js","api/auth.js","components/Login.js","components/Register.js","api/products.js","components/Home.js","api/cart.js","components/ProductDetails.js","components/Cart.js","components/ProtectedRoute.js","App.js","index.js"],"names":["getToken","localStorage","getItem","AuthContext","createContext","AuthProvider","_ref","children","existingToken","isAuthenticated","setIsAuthenticated","useState","logout","removeItem","useEffect","token","JSON","parse","atob","split","exp","Date","now","isTokenExpired","_jsx","Provider","value","login","setItem","setToken","API_URL","Login","formData","setFormData","email","password","error","setError","useContext","history","useHistory","handleChange","e","_objectSpread","target","name","_jsxs","style","maxWidth","margin","textAlign","color","onSubmit","async","preventDefault","data","axios","post","concat","userData","loginUser","push","err","_err$response","_err$response$data","response","message","display","flexDirection","gap","type","placeholder","onChange","required","padding","cursor","marginTop","onClick","textDecoration","Register","username","styles","container","fontFamily","form","input","fontSize","borderRadius","border","button","backgroundColor","marginBottom","link","fontWeight","registerUser","process","REACT_APP_API_URL","Home","products","setProducts","loading","setLoading","fetchProducts","get","console","getAllProducts","handleProductClick","productId","className","justifyContent","alignItems","background","handleLogout","width","length","map","product","_id","src","imageUrl","alt","description","substring","price","toFixed","countInStock","stopPropagation","category","ProductDetails","id","useParams","setProduct","adding","setAdding","fetchProduct","onError","alert","quantity","config","headers","Authorization","body","addToCart","disabled","opacity","handleViewCart","Cart","cart","setCart","loadCart","getCart","handleQuantityChange","newQuantity","updatedItems","items","item","updatedCart","put","updateCartItem","handleRemove","window","confirm","delete","removeFromCart","cartItems","totalPrice","reduce","acc","_item$product","min","parseInt","ProtectedRoute","component","Component","rest","_objectWithoutProperties","_excluded","Route","render","props","Redirect","to","App","Router","Switch","exact","path","ReactDOM","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.934eee61.chunk.js","sourcesContent":["export const setToken = (token) => {\n    if (token) {\n        localStorage.setItem('jwtToken', token);\n    } else {\n        localStorage.removeItem('jwtToken');\n    }\n};\n\nexport const getToken = () => {\n    return localStorage.getItem('jwtToken');\n};\n\nexport const isTokenExpired = (token) => {\n    if (!token) return true;\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.exp * 1000 < Date.now();\n};\n\n// Add this to the bottom of the file\nexport const removeToken = () => {\n    localStorage.removeItem('jwtToken');\n};","import React, { createContext, useState, useEffect } from \"react\";\n// 1. Import the helper functions from the file you just showed me\nimport {\n  getToken,\n  setToken,\n  removeToken,\n  isTokenExpired,\n} from \"../utils/token\";\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  // Check if token exists on load\n  const existingToken = getToken();\n  const [isAuthenticated, setIsAuthenticated] = useState(!!existingToken);\n\n  // --- LOGIN FUNCTION ---\n  const login = (token) => {\n    // CRITICAL FIX: You must call setToken here!\n    // If this line is missing, the token never gets saved to Local Storage.\n    setToken(token);\n    setIsAuthenticated(true);\n  };\n\n  // --- LOGOUT FUNCTION ---\n  const logout = () => {\n    removeToken(); // Removes 'jwtToken' from Local Storage\n    setIsAuthenticated(false);\n  };\n\n  // Optional: Check expiration on load\n  useEffect(() => {\n    const token = getToken();\n    if (token && isTokenExpired(token)) {\n      logout();\n    }\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ isAuthenticated, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n","import axios from \"axios\";\n\nconst API_URL = \"https://ecommerce-backend-three-chi.vercel.app/api/auth/\";\n\nconst register = async (userData) => {\n  const response = await axios.post(`${API_URL}register`, userData);\n  return response.data;\n};\n\nconst login = async (userData) => {\n  const response = await axios.post(`${API_URL}login`, userData);\n  return response.data;\n};\n\nconst logout = () => {\n  localStorage.removeItem(\"token\");\n};\n\nconst getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem(\"user\"));\n};\n\nexport { register as registerUser, login as loginUser, logout, getCurrentUser };\n","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { loginUser } from \"../api/auth\";\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const { login } = useContext(AuthContext);\n  const history = useHistory();\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const data = await loginUser(formData);\n      login(data.token);\n      history.push(\"/\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Invalid credentials\");\n    }\n  };\n\n  return (\n    <div\n      style={{ maxWidth: \"400px\", margin: \"50px auto\", textAlign: \"center\" }}\n    >\n      <h2>Login</h2>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n\n      <form\n        onSubmit={handleSubmit}\n        style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}\n      >\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          onChange={handleChange}\n          required\n          style={{ padding: \"10px\" }}\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          onChange={handleChange}\n          required\n          style={{ padding: \"10px\" }}\n        />\n        <button type=\"submit\" style={{ padding: \"10px\", cursor: \"pointer\" }}>\n          Login\n        </button>\n      </form>\n\n      {/* ADDED: Link to Register Page */}\n      <p style={{ marginTop: \"20px\" }}>\n        Don't have an account?{\" \"}\n        <span\n          onClick={() => history.push(\"/register\")}\n          style={{\n            color: \"blue\",\n            cursor: \"pointer\",\n            textDecoration: \"underline\",\n          }}\n        >\n          Register here\n        </span>\n      </p>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { registerUser } from \"../api/auth\";\n\nconst Register = () => {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const [error, setError] = useState(\"\");\n  const { login } = useContext(AuthContext);\n  const history = useHistory();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    try {\n      const data = await registerUser(formData);\n\n      // If backend returns a token on register, login immediately\n      if (data.token) {\n        login(data.token);\n        history.push(\"/\"); // Redirect to Home\n      } else {\n        history.push(\"/login\");\n      }\n    } catch (err) {\n      setError(\n        err.response?.data?.message || \"Registration failed. Try again.\"\n      );\n    }\n  };\n\n  // Styles object for clean code\n  const styles = {\n    container: {\n      maxWidth: \"400px\",\n      margin: \"50px auto\",\n      textAlign: \"center\",\n      fontFamily: \"Arial, sans-serif\",\n    },\n    form: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: \"15px\",\n      marginTop: \"20px\",\n    },\n    input: {\n      padding: \"10px\",\n      fontSize: \"16px\",\n      borderRadius: \"5px\",\n      border: \"1px solid #ccc\",\n    },\n    button: {\n      padding: \"10px\",\n      fontSize: \"16px\",\n      backgroundColor: \"#007BFF\", // Blue color\n      color: \"white\",\n      border: \"none\",\n      borderRadius: \"5px\",\n      cursor: \"pointer\",\n      marginTop: \"10px\",\n    },\n    error: {\n      color: \"red\",\n      backgroundColor: \"#ffe6e6\",\n      padding: \"10px\",\n      borderRadius: \"5px\",\n      marginBottom: \"10px\",\n    },\n    link: {\n      color: \"#007BFF\",\n      cursor: \"pointer\",\n      textDecoration: \"underline\",\n      fontWeight: \"bold\",\n    },\n  };\n\n  return (\n    <div style={styles.container}>\n      <h2>Create an Account</h2>\n\n      {error && <div style={styles.error}>{error}</div>}\n\n      <form onSubmit={handleSubmit} style={styles.form}>\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"Username\"\n          value={formData.username}\n          onChange={handleChange}\n          required\n          style={styles.input}\n        />\n\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email Address\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          style={styles.input}\n        />\n\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          style={styles.input}\n        />\n\n        <button type=\"submit\" style={styles.button}>\n          Register\n        </button>\n      </form>\n\n      <p style={{ marginTop: \"20px\" }}>\n        Already have an account?{\" \"}\n        <span onClick={() => history.push(\"/login\")} style={styles.link}>\n          Login here\n        </span>\n      </p>\n    </div>\n  );\n};\n\nexport default Register;\n","import axios from \"axios\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\r\n\r\n// Get all products\r\nexport const getAllProducts = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/products`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching products:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Get single product by ID\r\nexport const getProductById = async (id) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/products/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching product:\", error);\r\n    throw error;\r\n  }\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getAllProducts } from \"../api/products\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./Home.css\";\r\n\r\nconst Home = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await getAllProducts();\r\n      setProducts(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(\"Failed to load products. Please try again later.\");\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleProductClick = (productId) => {\r\n    history.push(`/product/${productId}`);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"jwtToken\"); // Use 'jwtToken' for consistency\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        Â  Â  Â  Â  <h2>Loading products...</h2>Â  Â  Â {\" \"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        Â  Â  Â  Â  <h2>{error}</h2>Â  Â  Â  Â {\" \"}\r\n        <button onClick={fetchProducts}>Retry</button>Â  Â  Â {\" \"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      Â  Â  Â {\" \"}\r\n      <div\r\n        className=\"home-header\"\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          // CRITICAL: Ensure items are vertically centered in the header\r\n          alignItems: \"center\",\r\n          // Added padding/margin reset to fight external CSS\r\n          padding: \"10px 0\",\r\n          margin: \"0\",\r\n        }}\r\n      >\r\n        {/* Title Block */}Â  Â  Â  Â {\" \"}\r\n        <div className=\"header-title-block\" style={{ margin: 0, padding: 0 }}>\r\n          {/* CRITICAL: Force margin/padding reset on the text container */}Â  Â \r\n          Â  Â  Â  <h1>Our Products</h1>Â  Â  Â  Â  Â {\" \"}\r\n          <p>Browse through our amazing collection</p>Â  Â  Â  Â {\" \"}\r\n        </div>\r\n        {/* Navigation Wrapper (Cart + Logout) */}Â  Â  Â  Â {\" \"}\r\n        <div\r\n          className=\"home-nav\"\r\n          style={{ display: \"flex\", gap: \"15px\", alignItems: \"center\" }}\r\n        >\r\n          {/* Cart Button */}\r\n          <button\r\n            className=\"cart-btn\"\r\n            onClick={() => history.push(\"/cart\")}\r\n            style={{\r\n              padding: \"10px 15px\",\r\n              background: \"#2ecc71\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"4px\",\r\n              cursor: \"pointer\",\r\n              fontWeight: \"bold\",\r\n            }}\r\n          >\r\n            ğŸ›’ View Cart\r\n          </button>\r\n          {/* Existing Logout Button */}Â  Â  Â  Â  Â  Â {\" \"}\r\n          <button\r\n            className=\"logout-btn\"\r\n            onClick={handleLogout}\r\n            style={{ padding: \"10px 15px\", borderRadius: \"4px\" }}\r\n          >\r\n            Â  Â  Â  Â  Â  Â  Â  Logout Â  Â  Â  Â  Â  Â {\" \"}\r\n          </button>\r\n        </div>\r\n        Â  Â  Â {\" \"}\r\n      </div>\r\n      {/* Horizontal Rule below the header */}\r\n      <hr\r\n        style={{ width: \"100%\", border: \"0.5px solid #eee\", margin: \"20px 0\" }}\r\n      />\r\n      Â  Â  Â {\" \"}\r\n      {products.length === 0 ? (\r\n        <div className=\"no-products\">\r\n          Â  Â  Â  Â  Â  <p>No products available at the moment.</p>Â  Â  Â  Â {\" \"}\r\n        </div>\r\n      ) : (\r\n        <div className=\"products-grid\">\r\n          Â  Â  Â  Â  Â {\" \"}\r\n          {products.map((product) => (\r\n            <div\r\n              key={product._id}\r\n              className=\"product-card\" // Keep card clickable for better UX\r\n              onClick={() => handleProductClick(product._id)}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              <div className=\"product-image\">\r\n                Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <img src={product.imageUrl} alt={product.name} />Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              </div>\r\n              Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              <div className=\"product-info\">\r\n                Â  Â  Â  Â  Â  Â  Â  Â  <h3>{product.name}</h3>Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <p className=\"product-description\">\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â  {product.description.substring(0, 80)}Â  Â  Â \r\n                  Â  Â  Â  Â  Â  Â  {product.description.length > 80 ? \"...\" : \"\"}Â  Â \r\n                  Â  Â  Â  Â  Â  Â {\" \"}\r\n                </p>\r\n                Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <div className=\"product-footer\">\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  <span className=\"product-price\">\r\n                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${product.price.toFixed(2)}Â  Â  Â  Â  Â  Â  Â \r\n                    Â  Â {\" \"}\r\n                  </span>\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  <span\r\n                    className={`product-stock ${\r\n                      product.countInStock > 0 ? \"in-stock\" : \"out-stock\"\r\n                    }`}\r\n                  >\r\n                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                    {product.countInStock > 0\r\n                      ? `${product.countInStock} in stock`\r\n                      : \"Out of stock\"}\r\n                    Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  </span>\r\n                  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                </div>\r\n                Â  Â  Â  Â  Â  Â  Â  Â  {/* ADDED: Explicit View Details Button */}Â  Â  Â \r\n                Â  Â  Â  Â  Â {\" \"}\r\n                <button\r\n                  className=\"view-details-btn\"\r\n                  style={{\r\n                    marginTop: \"10px\",\r\n                    padding: \"8px 16px\",\r\n                    backgroundColor: \"#333\",\r\n                    color: \"#fff\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    cursor: \"pointer\",\r\n                    width: \"100%\",\r\n                  }}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation(); // Prevents double-triggering the card click\r\n                    handleProductClick(product._id);\r\n                  }}\r\n                >\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â  View Details Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                </button>\r\n                Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <span className=\"product-category\">{product.category}</span>Â  Â \r\n                Â  Â  Â  Â  Â {\" \"}\r\n              </div>\r\n              Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n            </div>\r\n          ))}\r\n          Â  Â  Â  Â {\" \"}\r\n        </div>\r\n      )}\r\n      Â  Â {\" \"}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import axios from \"axios\";\r\n\r\nconst API_URL = \"https://ecommerce-backend-three-chi.vercel.app/api/cart\";\r\n\r\n// 1. Add item to cart (POST)\r\nexport const addToCart = async (productId, quantity) => {\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = { productId, quantity };\r\n  const response = await axios.post(API_URL, body, config);\r\n  return response.data;\r\n};\r\n\r\n// 2. Get user's cart (GET)\r\nexport const getCart = async () => {\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  const response = await axios.get(API_URL, config);\r\n  return response.data;\r\n};\r\n\r\n// 3. Update item quantity (PUT)\r\nexport const updateCartItem = async (productId, quantity) => {\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = { quantity };\r\n  const response = await axios.put(`${API_URL}/${productId}`, body, config);\r\n  return response.data;\r\n};\r\n\r\n// 4. Remove item from cart (DELETE)\r\nexport const removeFromCart = async (productId) => {\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  const response = await axios.delete(`${API_URL}/${productId}`, config);\r\n  return response.data;\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { addToCart } from \"../api/cart\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport \"./ProductDetails.css\";\r\n\r\nconst ProductDetails = () => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [adding, setAdding] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://ecommerce-backend-three-chi.vercel.app/api/products/${id}`\r\n        );\r\n        setProduct(response.data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching product:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!isAuthenticated) {\r\n      alert(\"You must be logged in to add items to the cart!\");\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAdding(true);\r\n      await addToCart(product._id, 1);\r\n      history.push(\"/cart\");\r\n      setAdding(false);\r\n    } catch (error) {\r\n      console.error(\"Error adding to cart:\", error);\r\n      alert(\"Failed to add item. Please try again.\");\r\n      setAdding(false);\r\n    }\r\n  };\r\n\r\n  const handleViewCart = () => {\r\n    history.push(\"/cart\");\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"product-details-container\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  if (!product)\r\n    return (\r\n      <div className=\"product-details-container\">\r\n        <h2>Product not found</h2>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"product-details-container\">\r\n      <div className=\"product-image-section\">\r\n        <img\r\n          src={product.imageUrl}\r\n          alt={product.name}\r\n          onError={(e) => {\r\n            e.target.src = \"https://via.placeholder.com/400\";\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"product-info-section\">\r\n        <h1 className=\"product-title\">{product.name}</h1>\r\n        <p className=\"product-category\">Category: {product.category}</p>\r\n        <p className=\"product-price\">${product.price}</p>\r\n\r\n        <div className=\"product-description\">\r\n          <h3>Description:</h3>\r\n          <p>{product.description}</p>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"20px\" }}>\r\n          <button\r\n            className=\"add-to-cart-btn\"\r\n            onClick={handleAddToCart}\r\n            disabled={adding}\r\n            style={adding ? { opacity: 0.7, cursor: \"not-allowed\" } : {}}\r\n          >\r\n            {adding ? \"Adding...\" : \"Add to Cart\"}\r\n          </button>\r\n\r\n          <button\r\n            className=\"view-cart-btn\"\r\n            onClick={handleViewCart}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              backgroundColor: \"#3498db\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"5px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            ğŸ›’ View Cart\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { getCart, updateCartItem, removeFromCart } from \"../api/cart\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./Cart.css\";\r\n\r\nconst Cart = () => {\r\n  const [cart, setCart] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const history = useHistory(); // Fetch cart on component mount\r\n\r\n  useEffect(() => {\r\n    loadCart();\r\n  }, []);\r\n\r\n  const loadCart = async () => {\r\n    try {\r\n      const data = await getCart();\r\n      setCart(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Failed to load cart. Please ensure you are logged in.\");\r\n      setLoading(false);\r\n    }\r\n  }; // Handler for Quantity Change (Increase/Decrease)\r\n\r\n  const handleQuantityChange = async (productId, newQuantity) => {\r\n    // Only allow positive quantities\r\n    if (newQuantity < 1) return;\r\n\r\n    try {\r\n      // Optimistic UI update for perceived speed\r\n      const updatedItems = cart.items.map((item) =>\r\n        item.product._id === productId\r\n          ? { ...item, quantity: newQuantity }\r\n          : item\r\n      );\r\n      setCart({ ...cart, items: updatedItems }); // Call the API\r\n\r\n      const updatedCart = await updateCartItem(productId, newQuantity);\r\n      setCart(updatedCart); // Sync state with server response\r\n    } catch (err) {\r\n      console.error(\"Error updating quantity:\", err);\r\n      alert(\"Could not update quantity. Please try again.\");\r\n      loadCart(); // Revert on error\r\n    }\r\n  }; // Handler for Remove Item\r\n\r\n  const handleRemove = async (productId) => {\r\n    if (!window.confirm(\"Are you sure you want to remove this item?\")) return;\r\n\r\n    try {\r\n      const updatedCart = await removeFromCart(productId);\r\n      setCart(updatedCart);\r\n    } catch (err) {\r\n      console.error(\"Error removing item:\", err);\r\n      alert(\"Could not remove item.\");\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"cart-container\">\r\n        Â  Â  Â  Â  <h2>Loading Cart...</h2>Â  Â  Â {\" \"}\r\n      </div>\r\n    );\r\n  if (error)\r\n    return (\r\n      <div className=\"cart-container\">\r\n        Â  Â  Â  Â  <h2>{error}</h2>Â  Â  Â {\" \"}\r\n      </div>\r\n    );\r\n\r\n  const cartItems = cart ? cart.items : []; // Calculate Total Price\r\n\r\n  const totalPrice = cartItems.reduce((acc, item) => {\r\n    // Ensure item.product exists before accessing price\r\n    return acc + (item.product?.price || 0) * item.quantity;\r\n  }, 0);\r\n\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div className=\"cart-container empty-cart\">\r\n        Â  Â  Â  Â  <h2>Your cart is empty</h2>Â  Â  Â  Â {\" \"}\r\n        <p>Looks like you haven't added anything to your cart yet.</p>Â  Â  Â  Â {\" \"}\r\n        <button\r\n          className=\"checkout-btn\"\r\n          onClick={() => history.push(\"/\")}\r\n          style={{ marginTop: \"20px\" }}\r\n        >\r\n          Â  Â  Â  Â  Â  Start Shopping Â  Â  Â  Â {\" \"}\r\n        </button>\r\n        Â  Â  Â {\" \"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart-container\">\r\n      {/* NEW: Home/Continue Shopping Button */}\r\n      <button\r\n        onClick={() => history.push(\"/\")}\r\n        style={{\r\n          marginBottom: \"20px\",\r\n          padding: \"10px 15px\",\r\n          backgroundColor: \"#555\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"4px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        â¬…ï¸ Continue Shopping\r\n      </button>\r\n      Â  Â  Â  <h1>Shopping Cart ({cartItems.length} items)</h1>Â  Â  Â {\" \"}\r\n      <table className=\"cart-table\">\r\n        Â  Â  Â  Â {\" \"}\r\n        <thead>\r\n          Â  Â  Â  Â  Â {\" \"}\r\n          <tr>\r\n            Â  Â  Â  Â  Â  Â  <th>Product</th>Â  Â  Â  Â  Â  Â  <th>Price</th>Â  Â  Â  Â  Â  Â {\" \"}\r\n            <th>Quantity</th>Â  Â  Â  Â  Â  Â  <th>Subtotal</th>Â  Â  Â  Â  Â  Â {\" \"}\r\n            <th>Action</th>Â  Â  Â  Â  Â {\" \"}\r\n          </tr>\r\n          Â  Â  Â  Â {\" \"}\r\n        </thead>\r\n        Â  Â  Â  Â {\" \"}\r\n        <tbody>\r\n          Â  Â  Â  Â  Â {\" \"}\r\n          {cartItems.map((item) => (\r\n            <tr key={item.product._id}>\r\n              Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              <td data-label=\"Product\">\r\n                Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <div className=\"item-info\">\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  <img\r\n                    src={item.product.imageUrl}\r\n                    alt={item.product.name}\r\n                    className=\"cart-item-image\"\r\n                    onError={(e) => {\r\n                      e.target.src = \"https://via.placeholder.com/80\";\r\n                    }}\r\n                  />\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  <div>\r\n                    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>{item.product.name}</strong>Â  Â \r\n                    Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                    <p style={{ fontSize: \"0.85rem\", color: \"#666\" }}>\r\n                      Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {item.product.category}Â  Â  Â  Â  Â  Â  Â \r\n                      Â  Â  Â {\" \"}\r\n                    </p>\r\n                    Â  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                  </div>\r\n                  Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                </div>\r\n                Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              </td>\r\n              Â  Â  Â  Â  Â  Â  Â  <td>${item.product.price.toFixed(2)}</td>Â  Â  Â  Â  Â  Â \r\n              Â {\" \"}\r\n              <td>\r\n                Â  Â  Â  Â  Â  Â  Â  Â  {/* Quantity Input linked to handler */}\r\n                Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"qty-input\"\r\n                  min=\"1\"\r\n                  value={item.quantity}\r\n                  onChange={(e) =>\r\n                    handleQuantityChange(\r\n                      item.product._id,\r\n                      parseInt(e.target.value)\r\n                    )\r\n                  }\r\n                />\r\n                Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              </td>\r\n              Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              <td>${(item.product.price * item.quantity).toFixed(2)}</td>Â  Â  Â  Â \r\n              Â  Â  Â {\" \"}\r\n              <td>\r\n                Â  Â  Â  Â  Â  Â  Â  Â  {/* Remove Button linked to handler */}Â  Â  Â  Â  Â \r\n                Â  Â  Â {\" \"}\r\n                <button\r\n                  className=\"remove-btn\"\r\n                  onClick={() => handleRemove(item.product._id)}\r\n                >\r\n                  Â  Â  Â  Â  Â  Â  Â  Â  Â  Remove Â  Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n                </button>\r\n                Â  Â  Â  Â  Â  Â  Â {\" \"}\r\n              </td>\r\n              Â  Â  Â  Â  Â  Â {\" \"}\r\n            </tr>\r\n          ))}\r\n          Â  Â  Â  Â {\" \"}\r\n        </tbody>\r\n        Â  Â  Â {\" \"}\r\n      </table>\r\n      Â  Â  Â {\" \"}\r\n      <div className=\"cart-summary\">\r\n        Â  Â  Â  Â {\" \"}\r\n        <div className=\"total-price\">Total: ${totalPrice.toFixed(2)}</div>Â  Â  Â \r\n        Â {\" \"}\r\n        <button\r\n          className=\"checkout-btn\"\r\n          onClick={() => alert(\"Checkout functionality coming soon!\")}\r\n        >\r\n          Â  Â  Â  Â  Â  Proceed to Checkout Â  Â  Â  Â {\" \"}\r\n        </button>\r\n        Â  Â  Â {\" \"}\r\n      </div>\r\n      Â  Â {\" \"}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { AuthContext } from '../contexts/AuthContext';\n\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\n    const { isAuthenticated } = useContext(AuthContext);\n\n    return (\n        <Route\n            {...rest}\n            render={props =>\n                isAuthenticated ? (\n                    <Component {...props} />\n                ) : (\n                    <Redirect to=\"/login\" />\n                )\n            }\n        />\n    );\n};\n\nexport default ProtectedRoute;","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Home from \"./components/Home\";\nimport ProductDetails from \"./components/ProductDetails\";\nimport Cart from \"./components/Cart\"; // 1. Import Cart\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport { AuthProvider } from \"./contexts/AuthContext\";\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <Switch>\n          {/* Protected Home Route */}\n          <ProtectedRoute exact path=\"/\" component={Home} />\n\n          {/* Protected Product Details Route */}\n          <ProtectedRoute path=\"/product/:id\" component={ProductDetails} />\n\n          {/* Protected Cart Route - ADDED THIS */}\n          <ProtectedRoute path=\"/cart\" component={Cart} />\n\n          {/* Public Routes */}\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}