{"ast":null,"code":"import React,{useEffect,useState,useContext}from\"react\";import{useParams,useHistory}from\"react-router-dom\";import axios from\"axios\";import{addToCart}from\"../api/cart\";import{AuthContext}from\"../contexts/AuthContext\";import\"./ProductDetails.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetails=()=>{const{id}=useParams();const history=useHistory();const{isAuthenticated}=useContext(AuthContext);const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[adding,setAdding]=useState(false);useEffect(()=>{const fetchProduct=async()=>{try{const response=await axios.get(\"https://ecommerce-backend-three-chi.vercel.app/api/products/\".concat(id));setProduct(response.data);setLoading(false);}catch(error){console.error(\"Error fetching product:\",error);setLoading(false);}};fetchProduct();},[id]);const handleAddToCart=async()=>{if(!isAuthenticated){alert(\"You must be logged in to add items to the cart!\");history.push(\"/login\");return;}try{setAdding(true);await addToCart(product._id,1);history.push(\"/cart\");setAdding(false);}catch(error){console.error(\"Error adding to cart:\",error);alert(\"Failed to add item. Please try again.\");setAdding(false);}};const handleViewCart=()=>{history.push(\"/cart\");};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"product-details-container\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"})});if(!product)return/*#__PURE__*/_jsx(\"div\",{className:\"product-details-container\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Product not found\"})});return/*#__PURE__*/_jsxs(\"div\",{className:\"product-details-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,onError:e=>{e.target.src=\"https://via.placeholder.com/400\";}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-title\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-category\",children:[\"Category: \",product.category]}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[\"$\",product.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"15px\",marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart-btn\",onClick:handleAddToCart,disabled:adding,style:adding?{opacity:0.7,cursor:\"not-allowed\"}:{},children:adding?\"Adding...\":\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{className:\"view-cart-btn\",onClick:handleViewCart,style:{padding:\"10px 20px\",backgroundColor:\"#3498db\",color:\"white\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"\\uD83D\\uDED2 View Cart\"})]})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","useHistory","axios","addToCart","AuthContext","jsx","_jsx","jsxs","_jsxs","ProductDetails","id","history","isAuthenticated","product","setProduct","loading","setLoading","adding","setAdding","fetchProduct","response","get","concat","data","error","console","handleAddToCart","alert","push","_id","handleViewCart","className","children","src","imageUrl","alt","name","onError","e","target","category","price","description","style","display","gap","marginTop","onClick","disabled","opacity","cursor","padding","backgroundColor","color","border","borderRadius"],"sources":["C:/Users/Acer/Desktop/mern-jwt-app/mern-jwt-app/client/src/components/ProductDetails.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { addToCart } from \"../api/cart\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport \"./ProductDetails.css\";\r\n\r\nconst ProductDetails = () => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [adding, setAdding] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://ecommerce-backend-three-chi.vercel.app/api/products/${id}`\r\n        );\r\n        setProduct(response.data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching product:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!isAuthenticated) {\r\n      alert(\"You must be logged in to add items to the cart!\");\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAdding(true);\r\n      await addToCart(product._id, 1);\r\n      history.push(\"/cart\");\r\n      setAdding(false);\r\n    } catch (error) {\r\n      console.error(\"Error adding to cart:\", error);\r\n      alert(\"Failed to add item. Please try again.\");\r\n      setAdding(false);\r\n    }\r\n  };\r\n\r\n  const handleViewCart = () => {\r\n    history.push(\"/cart\");\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"product-details-container\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  if (!product)\r\n    return (\r\n      <div className=\"product-details-container\">\r\n        <h2>Product not found</h2>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"product-details-container\">\r\n      <div className=\"product-image-section\">\r\n        <img\r\n          src={product.imageUrl}\r\n          alt={product.name}\r\n          onError={(e) => {\r\n            e.target.src = \"https://via.placeholder.com/400\";\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"product-info-section\">\r\n        <h1 className=\"product-title\">{product.name}</h1>\r\n        <p className=\"product-category\">Category: {product.category}</p>\r\n        <p className=\"product-price\">${product.price}</p>\r\n\r\n        <div className=\"product-description\">\r\n          <h3>Description:</h3>\r\n          <p>{product.description}</p>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"20px\" }}>\r\n          <button\r\n            className=\"add-to-cart-btn\"\r\n            onClick={handleAddToCart}\r\n            disabled={adding}\r\n            style={adding ? { opacity: 0.7, cursor: \"not-allowed\" } : {}}\r\n          >\r\n            {adding ? \"Adding...\" : \"Add to Cart\"}\r\n          </button>\r\n\r\n          <button\r\n            className=\"view-cart-btn\"\r\n            onClick={handleViewCart}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              backgroundColor: \"#3498db\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"5px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            ðŸ›’ View Cart\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}